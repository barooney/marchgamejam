<!doctype html>
<script src="helpers.js"></script>
<script src="castle.js"></script>
<script src="soldier.js"></script>

<head>
<title>revolution</title>
<meta charset="utf-8">

</head>

<canvas id="myCanvas" width="640" height="480"
	style="border: 1px solid #000000;">
<script>

var c = document.getElementById("myCanvas");
var ctx = c.getContext("2d");

var castleImg = new Image(); // HTML5 Constructor
castleImg.src = 'img/castle.png';
var soldierImg = new Image(); // HTML5 Constructor
soldierImg.src = 'img/soldier.png';

var castles = [new castle(), new castle(), new castle()];
castles[0].posX = 10;
castles[1].posX = 150;
castles[1].posY = 150;
castles[2].posX = 200;
castles[2].posY = 200;

var soldiers = [ new soldier()];
soldiers[0].startingCastle = castles[1];
soldiers[0].targetCastle = castles[2];

var xpos = 80;
var ypos = 32.5;

  function drawTriangle(ctx) {
   
  ctx.fillStyle = "#000000";
  ctx.beginPath();
  ctx.moveTo(240+xpos, 0+ypos);
  ctx.lineTo(480+xpos,Math.sqrt(3)/2*480+ypos);
  ctx.lineTo(0+xpos,Math.sqrt(3)/2*480+ypos);
  ctx.closePath();
  ctx.fill();
    
}
fly();

function fly() {
	drawTriangle(ctx);
	for(castleIndex in castles) {
		castles[castleIndex].drawMe();
	}
	for(soldierIndex in soldiers) {
		soldiers[soldierIndex].progress += 0.01;
		soldiers[soldierIndex].progress = Math.min(soldiers[soldierIndex].progress, 1.0);
		soldiers[soldierIndex].drawMe();
	}
}

setInterval(fly, 50);

</script> 

</canvas>

